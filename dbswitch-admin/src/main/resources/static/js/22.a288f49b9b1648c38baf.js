webpackJsonp([22],{TMSi:function(e,t){},qdtB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),r={data:function(){return{loading:!0,keyword:null,lists:[],currentPage:1,pageSize:10,totalCount:2,databaseType:[],connectionDriver:[],tableData:[],queryForm:{title:"",type:"",url:"",diver:"",version:"",username:"",password:""},createform:{title:"",type:"",diver:"",sample:"",url:"",version:"",username:"",password:""},updateform:{id:0,title:"",type:"",diver:"",version:"",username:"",password:""},rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],type:[{required:!0,message:"数据库类型必须选择",trigger:"change"}],version:[{required:!0,message:"驱动版本必须选择",trigger:"change"}],url:[{required:!0,message:"Jdbc URL必须提供",trigger:"blur"}],username:[{required:!0,message:"连接账号名必须提供",trigger:"blur"}],password:[{required:!0,message:"连接密码必须提供",trigger:"blur"}]},dialogFormVisible:!1,createFormVisible:!1,updateFormVisible:!1,dataSourceCreateStep1:!1}},methods:{loadData:function(){var e=this;this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/dbswitch/admin/api/v1/connection/list",data:n()({searchText:this.keyword,page:this.currentPage,size:this.pageSize})}).then(function(t){0===t.data.code?(e.currentPage=t.data.pagination.page,e.pageSize=t.data.pagination.size,e.totalCount=t.data.pagination.total,e.tableData=t.data.data):alert("加载任务列表失败:"+t.data.message)})},searchByKeyword:function(){this.currentPage=1,this.loadData()},loadDatabaseTypes:function(){var e=this;this.databaseType=[],this.$http({method:"GET",url:"/dbswitch/admin/api/v1/connection/types"}).then(function(t){0===t.data.code?e.databaseType=t.data.data:alert("加载任务列表失败:"+t.data.message)},function(){console.log("failed")})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将此数据源ID="+t.id+"删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.delete("/dbswitch/admin/api/v1/connection/delete/"+t.id).then(function(e){0===e.data.code?a.loadData():alert("删除任务失败:"+e.data.message)})})},handleDetail:function(e,t){this.$router.push({path:"/connection/list/detail",query:{id:t.id}})},handleTest:function(e,t){var a=this;this.$http.get("/dbswitch/admin/api/v1/connection/test/"+t.id).then(function(e){0===e.data.code?a.$message({message:"测试连接成功!",type:"success"}):a.$message.error("测试连接失败,"+e.data.message)})},selectDataSource:function(){this.$router.push("/connection/list/select")},handleUpdate:function(e,t){this.$router.push({path:"/connection/list/update",query:{id:t.id}})},handleSizeChange:function(e){this.loading=!0,this.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.loading=!0,this.currentPage=e,this.loadData()}},created:function(){this.loadDatabaseTypes(),this.loadData()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{staticClass:"connection-list-top"},[a("div",{staticClass:"left-search-input-group"},[a("div",{staticClass:"left-search-input"},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"默认按照数据源名称搜索",clearable:!0},on:{change:e.searchByKeyword},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)]),e._v(" "),a("div",{staticClass:"right-add-button-group"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-document-add"},on:{click:e.selectDataSource}},[e._v("创建数据源")])],1)]),e._v(" "),a("el-table",{attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,size:"small",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"5%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"数据源名称","show-overflow-tooltip":"","min-width":"20%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"数据库类型","show-overflow-tooltip":"","min-width":"10%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"驱动版本","show-overflow-tooltip":"","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"18%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名","show-overflow-tooltip":"","min-width":"10%"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"35%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticClass:"btn-text",attrs:{type:"primary"},on:{click:function(a){return e.handleTest(t.$index,t.row)}}},[e._v("测试")]),e._v(" "),a("label",{staticClass:"btn-style"},[e._v(" | ")]),e._v(" "),a("el-link",{staticClass:"btn-text",attrs:{type:"primary"},on:{click:function(a){return e.handleUpdate(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("label",{staticClass:"btn-style"},[e._v(" | ")]),e._v(" "),a("el-link",{staticClass:"btn-text",attrs:{type:"primary"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")]),e._v(" "),a("label",{staticClass:"btn-style"},[e._v(" | ")]),e._v(" "),a("el-link",{staticClass:"btn-text",attrs:{type:"primary"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"page",attrs:{align:"right"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("TMSi")},"data-v-05ff6668",null);t.default=l.exports}});
//# sourceMappingURL=22.a288f49b9b1648c38baf.js.map